<script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>

{# {% set blogAdSelect = {
  "frank australia" : "Frank_AU",
  "frank nz"        : "Frank_NZ",
  "frank uk"        : "Frank_UK",
  "frank global"    : "Frank_US"
  } %} 
{% set adPlace = blogAdSelect[(networkData.title | lower)] %}

{% if adPlace == '' %}
    {% set adPlace = 'Frank_US' %}
{% endif %} #}

{% set dfpAcct = '21651851619' %}

<script>

  var invSpace = 'Frank_AU';

  blogName = '{{blogNetworkName}}'
  googletag.cmd.push(function() {         
                googletag.pubads().enableSingleRequest();
                googletag.pubads().collapseEmptyDivs();
                googletag.pubads().setCentering(true);
                googletag.enableServices();
                
            });

  var vidInvSpace = invSpace + '_vp';
  var bannerSize = [[970,90],[728,90],[320,50],[300,50]];
  var bannerMap = [[[1025,0],[970,90]],[[768,0],[728,90]],[[360,0],[320,50]],[[0,0],[300,50]]];
  var sBannerSize = [[728,90],[320,50],[300,50]];
  var sBannerMap = [[[1025,0],[728,90]],[[768,0],[320,50]],[[0,0],[300,50]]];
  var mRecSize = [[300,250],[300, 100]];
  var mRecMap = [[[768,0],[300,250]],[[0,0],[300,100]]];
  var sRecSize = [[300,100],[300,50]];
  var sRecMap = [[[768,0],[300,100]],[[0,0],[300,50]]];
  var hPageSize = [[300,600],[300,100]];
  var hPageMap = [[[768,0],[300,600]],[[0,0],[]]];
  var mOnlySize = [[300,50]];
  var mOnlyMap = [[[768,0],[]],[[0,0],[300,50]]];
    
  var nextAdId = 1;

  
  function generateNextAdName() {
     var id = nextAdId++;
     return 'adSlot' + id;
  }

  function loadNextAd(blogAd,adDivId,adClass,sizes,mapping) {
    try {
      var adSlot = document.getElementById(adDivId);
      var slotName = generateNextAdName();
      var slotDiv = document.createElement('div');

      adSlot.appendChild(slotDiv);
      slotDiv.id = slotName;
      slotDiv.setAttribute( 'class', 'google_ad' );
      adSlot.id = "";
      adSlot.setAttribute( 'class', adClass );
      googletag.cmd.push(function() {
        console.log(blogAd, sizes, slotName);
        var slot = googletag.defineSlot('/{{dfpAcct}}/'+blogAd, sizes, slotName).setTargeting().defineSizeMapping(mapping).addService(googletag.pubads());
        console.log(slot);
        googletag.display(slotName);
        //googletag.pubads().refresh([slot]);
      });

    } catch(e) {
      console.log(e);
    }
  }


</script>